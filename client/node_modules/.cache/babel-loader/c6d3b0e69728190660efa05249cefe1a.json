{"ast":null,"code":"import axios from 'axios';\nconst apiClient = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Interceptor to add JWT token to requests and mark start time\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n\n  // Use platform performance API to mark start\n  if (typeof performance !== 'undefined') {\n    config.metadata = {\n      startTime: performance.now(),\n      timeOrigin: performance.timeOrigin || 0\n    };\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor to compute duration\napiClient.interceptors.response.use(response => {\n  if (response.config && response.config.metadata && typeof performance !== 'undefined') {\n    var _response$config$meth;\n    const duration = performance.now() - response.config.metadata.startTime;\n    // simple console timing output — remove or replace with logger as needed\n    console.info(`[api] ${(_response$config$meth = response.config.method) === null || _response$config$meth === void 0 ? void 0 : _response$config$meth.toUpperCase()} ${response.config.url} - ${Math.round(duration)} ms`);\n  }\n  return response;\n}, error => {\n  // If response available, compute duration as well\n  if (error.config && error.config.metadata && typeof performance !== 'undefined') {\n    var _error$config$method;\n    const duration = performance.now() - error.config.metadata.startTime;\n    console.info(`[api] ${(_error$config$method = error.config.method) === null || _error$config$method === void 0 ? void 0 : _error$config$method.toUpperCase()} ${error.config.url} - ${Math.round(duration)} ms (error)`);\n  }\n  return Promise.reject(error);\n});\nexport default apiClient;","map":{"version":3,"names":["axios","apiClient","create","baseURL","process","env","REACT_APP_API_URL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","performance","metadata","startTime","now","timeOrigin","error","Promise","reject","response","_response$config$meth","duration","console","info","method","toUpperCase","url","Math","round","_error$config$method"],"sources":["C:/Users/preet/Train4Teach/teacher-training-platform/client/src/api/apiClient.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiClient = axios.create({\n    baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\n    headers: {\n        'Content-Type': 'application/json',\n    },\n});\n\n// Interceptor to add JWT token to requests and mark start time\napiClient.interceptors.request.use((config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n        config.headers.Authorization = `Bearer ${token}`;\n    }\n\n    // Use platform performance API to mark start\n    if (typeof performance !== 'undefined') {\n        config.metadata = {\n            startTime: performance.now(),\n            timeOrigin: performance.timeOrigin || 0,\n        };\n    }\n\n    return config;\n}, (error) => {\n    return Promise.reject(error);\n});\n\n// Response interceptor to compute duration\napiClient.interceptors.response.use((response) => {\n    if (response.config && response.config.metadata && typeof performance !== 'undefined') {\n        const duration = performance.now() - response.config.metadata.startTime;\n        // simple console timing output — remove or replace with logger as needed\n        console.info(`[api] ${response.config.method?.toUpperCase()} ${response.config.url} - ${Math.round(duration)} ms`);\n    }\n    return response;\n}, (error) => {\n    // If response available, compute duration as well\n    if (error.config && error.config.metadata && typeof performance !== 'undefined') {\n        const duration = performance.now() - error.config.metadata.startTime;\n        console.info(`[api] ${error.config.method?.toUpperCase()} ${error.config.url} - ${Math.round(duration)} ms (error)`);\n    }\n    return Promise.reject(error);\n});\n\nexport default apiClient;"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,SAAS,GAAGD,KAAK,CAACE,MAAM,CAAC;EAC3BC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B;EACrEC,OAAO,EAAE;IACL,cAAc,EAAE;EACpB;AACJ,CAAC,CAAC;;AAEF;AACAN,SAAS,CAACO,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EAC3C,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACPD,MAAM,CAACJ,OAAO,CAACQ,aAAa,GAAG,UAAUH,KAAK,EAAE;EACpD;;EAEA;EACA,IAAI,OAAOI,WAAW,KAAK,WAAW,EAAE;IACpCL,MAAM,CAACM,QAAQ,GAAG;MACdC,SAAS,EAAEF,WAAW,CAACG,GAAG,CAAC,CAAC;MAC5BC,UAAU,EAAEJ,WAAW,CAACI,UAAU,IAAI;IAC1C,CAAC;EACL;EAEA,OAAOT,MAAM;AACjB,CAAC,EAAGU,KAAK,IAAK;EACV,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CAAC,CAAC;;AAEF;AACApB,SAAS,CAACO,YAAY,CAACgB,QAAQ,CAACd,GAAG,CAAEc,QAAQ,IAAK;EAC9C,IAAIA,QAAQ,CAACb,MAAM,IAAIa,QAAQ,CAACb,MAAM,CAACM,QAAQ,IAAI,OAAOD,WAAW,KAAK,WAAW,EAAE;IAAA,IAAAS,qBAAA;IACnF,MAAMC,QAAQ,GAAGV,WAAW,CAACG,GAAG,CAAC,CAAC,GAAGK,QAAQ,CAACb,MAAM,CAACM,QAAQ,CAACC,SAAS;IACvE;IACAS,OAAO,CAACC,IAAI,CAAC,UAAAH,qBAAA,GAASD,QAAQ,CAACb,MAAM,CAACkB,MAAM,cAAAJ,qBAAA,uBAAtBA,qBAAA,CAAwBK,WAAW,CAAC,CAAC,IAAIN,QAAQ,CAACb,MAAM,CAACoB,GAAG,MAAMC,IAAI,CAACC,KAAK,CAACP,QAAQ,CAAC,KAAK,CAAC;EACtH;EACA,OAAOF,QAAQ;AACnB,CAAC,EAAGH,KAAK,IAAK;EACV;EACA,IAAIA,KAAK,CAACV,MAAM,IAAIU,KAAK,CAACV,MAAM,CAACM,QAAQ,IAAI,OAAOD,WAAW,KAAK,WAAW,EAAE;IAAA,IAAAkB,oBAAA;IAC7E,MAAMR,QAAQ,GAAGV,WAAW,CAACG,GAAG,CAAC,CAAC,GAAGE,KAAK,CAACV,MAAM,CAACM,QAAQ,CAACC,SAAS;IACpES,OAAO,CAACC,IAAI,CAAC,UAAAM,oBAAA,GAASb,KAAK,CAACV,MAAM,CAACkB,MAAM,cAAAK,oBAAA,uBAAnBA,oBAAA,CAAqBJ,WAAW,CAAC,CAAC,IAAIT,KAAK,CAACV,MAAM,CAACoB,GAAG,MAAMC,IAAI,CAACC,KAAK,CAACP,QAAQ,CAAC,aAAa,CAAC;EACxH;EACA,OAAOJ,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CAAC,CAAC;AAEF,eAAepB,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module"}