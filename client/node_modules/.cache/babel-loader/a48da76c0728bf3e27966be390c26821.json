{"ast":null,"code":"import axios from 'axios';\nconst apiClient = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Interceptor to add JWT token to requests and mark start time\napiClient.interceptors.request.use(config => {\n  try {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n\n    // Use platform performance API to mark start\n    if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n      var _performance$timeOrig;\n      config.metadata = {\n        startTime: performance.now(),\n        timeOrigin: (_performance$timeOrig = performance.timeOrigin) !== null && _performance$timeOrig !== void 0 ? _performance$timeOrig : 0\n      };\n    }\n  } catch (err) {\n    // Don't throw here — log and continue so app load isn't blocked\n    // eslint-disable-next-line no-console\n    console.error('apiClient request interceptor error:', err);\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Response interceptor to compute duration\napiClient.interceptors.response.use(response => {\n  try {\n    if (response && response.config && response.config.metadata && typeof performance !== 'undefined' && typeof performance.now === 'function') {\n      var _response$config$meth;\n      const duration = performance.now() - response.config.metadata.startTime;\n      // simple console timing output — remove or replace with logger as needed\n      // eslint-disable-next-line no-console\n      console.info(`[api] ${(_response$config$meth = response.config.method) === null || _response$config$meth === void 0 ? void 0 : _response$config$meth.toUpperCase()} ${response.config.url} - ${Math.round(duration)} ms`);\n    }\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error('apiClient response interceptor error:', err);\n  }\n  return response;\n}, error => {\n  try {\n    if (error && error.config && error.config.metadata && typeof performance !== 'undefined' && typeof performance.now === 'function') {\n      var _error$config$method;\n      const duration = performance.now() - error.config.metadata.startTime;\n      // eslint-disable-next-line no-console\n      console.info(`[api] ${(_error$config$method = error.config.method) === null || _error$config$method === void 0 ? void 0 : _error$config$method.toUpperCase()} ${error.config.url} - ${Math.round(duration)} ms (error)`);\n    }\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error('apiClient response error handler failed:', err);\n  }\n  return Promise.reject(error);\n});\n\n// Simple convenience functions expected by some pages\nconst getTrainings = () => apiClient.get('/trainings');\nconst getUsers = () => apiClient.get('/users');\nexport { apiClient, getTrainings, getUsers };\nexport default apiClient;","map":{"version":3,"names":["axios","apiClient","create","baseURL","process","env","REACT_APP_API_URL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","performance","now","_performance$timeOrig","metadata","startTime","timeOrigin","err","console","error","Promise","reject","response","_response$config$meth","duration","info","method","toUpperCase","url","Math","round","_error$config$method","getTrainings","get","getUsers"],"sources":["C:/Users/preet/Train4Teach/teacher-training-platform/client/src/api/apiClient.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiClient = axios.create({\n    baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5000/api',\n    headers: {\n        'Content-Type': 'application/json',\n    },\n});\n\n// Interceptor to add JWT token to requests and mark start time\napiClient.interceptors.request.use((config) => {\n    try {\n        const token = localStorage.getItem('token');\n        if (token) {\n            config.headers.Authorization = `Bearer ${token}`;\n        }\n\n        // Use platform performance API to mark start\n        if (typeof performance !== 'undefined' && typeof performance.now === 'function') {\n            config.metadata = {\n                startTime: performance.now(),\n                timeOrigin: performance.timeOrigin ?? 0,\n            };\n        }\n    } catch (err) {\n        // Don't throw here — log and continue so app load isn't blocked\n        // eslint-disable-next-line no-console\n        console.error('apiClient request interceptor error:', err);\n    }\n\n    return config;\n}, (error) => {\n    return Promise.reject(error);\n});\n\n// Response interceptor to compute duration\napiClient.interceptors.response.use((response) => {\n    try {\n        if (response && response.config && response.config.metadata && typeof performance !== 'undefined' && typeof performance.now === 'function') {\n            const duration = performance.now() - response.config.metadata.startTime;\n            // simple console timing output — remove or replace with logger as needed\n            // eslint-disable-next-line no-console\n            console.info(`[api] ${response.config.method?.toUpperCase()} ${response.config.url} - ${Math.round(duration)} ms`);\n        }\n    } catch (err) {\n        // eslint-disable-next-line no-console\n        console.error('apiClient response interceptor error:', err);\n    }\n\n    return response;\n}, (error) => {\n    try {\n        if (error && error.config && error.config.metadata && typeof performance !== 'undefined' && typeof performance.now === 'function') {\n            const duration = performance.now() - error.config.metadata.startTime;\n            // eslint-disable-next-line no-console\n            console.info(`[api] ${error.config.method?.toUpperCase()} ${error.config.url} - ${Math.round(duration)} ms (error)`);\n        }\n    } catch (err) {\n        // eslint-disable-next-line no-console\n        console.error('apiClient response error handler failed:', err);\n    }\n    return Promise.reject(error);\n});\n\n// Simple convenience functions expected by some pages\nconst getTrainings = () => apiClient.get('/trainings');\nconst getUsers = () => apiClient.get('/users');\n\nexport { apiClient, getTrainings, getUsers };\nexport default apiClient;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}